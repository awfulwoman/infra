# https://docs.ansible.com/ansible/2.9/modules/acme_certificate_module.html#acme-certificate-module
# https://networkdoodles.com/posts/letsencrypt-part1/networkdoodles.com/posts/letsencrypt-part1/
# https://serverfault.com/questions/875247/whats-the-difference-between-include-tasks-and-import-tasks

- name: "STEP 1: Bootstrap"
  ansible.builtin.include_tasks: bootstrap.yaml

- name: "STEP 2: ACME account"
  ansible.builtin.include_tasks: account.yaml

- name: "STEP 3: Certificates"
  ansible.builtin.include_tasks:
    file: cert.yaml
  loop: "{{ acmeeeeeeee_domains }}"
  loop_control:
    loop_var: item
    extended: true

- name: "STEP 4: Just peace out"
  ansible.builtin.debug:
    msg: "All certificate requests finished"
