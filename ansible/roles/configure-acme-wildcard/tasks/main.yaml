# https://docs.ansible.com/ansible/2.9/modules/acme_certificate_module.html#acme-certificate-module
# https://networkdoodles.com/posts/letsencrypt-part1/networkdoodles.com/posts/letsencrypt-part1/
# https://serverfault.com/questions/875247/whats-the-difference-between-include-tasks-and-import-tasks

- name: Bootstrap role
  ansible.builtin.include_tasks: bootstrap.yaml

- name: Confgure ACME account
  ansible.builtin.include_tasks: account.yaml

- name: Deal with certificates
  ansible.builtin.include_tasks:
    file: cert.yaml
  loop: "{{ acmeeeeeeee_domains }}"
  loop_control:
    loop_var: item

- name: Peace out
  ansible.builtin.debug:
    msg: "Cert run finished"
