---
infra_privateresources_terraform_working_dir: "{{ terraform_working_dir }}/private-resources"
infra_privateresources_debug: false
infra_privateresources_tf_apply: false

# Hypervisor connection (Terraform runs on dns, connects to host-storage via SSH)
infra_privateresources_hypervisor_host: "host-storage"
# Dedicated service account with restricted libvirt-only access (least privilege)
infra_privateresources_hypervisor_user: "libvirt-remote"
infra_privateresources_hypervisor_ssh_uri: "qemu+ssh://{{ infra_privateresources_hypervisor_user }}@{{ infra_privateresources_hypervisor_host }}/system?keyfile={{ infra_privateresources_ssh_key_path }}"

# SSH key paths for service account on control plane (dns)
infra_privateresources_ssh_key_path: "/home/{{ ansible_user }}/.ssh/libvirt-remote_ed25519"
infra_privateresources_ssh_pubkey_path: "{{ infra_privateresources_ssh_key_path }}.pub"

# Network configuration (on hypervisor)
# VMs use libvirt default NAT network (192.168.122.0/24)
infra_privateresources_network_mode: "nat"

# Storage configuration (on hypervisor)
infra_privateresources_pool_path: "/fastpool/pools/vms"

# VM definitions
infra_privateresources_vms:
  - id: claude_dev
    name: "vm-claude-dev"
    description: "Claude Code development machine"
    source_image_url: "https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
    memory: 8192  # 8GB
    vcpus: 4
    disk_size_gb: 100  # Docker images, source code, build artifacts
    ip_address: "192.168.122.10"
    gateway: "192.168.122.1"
    dns: "192.168.122.1"
    mac_address: "52:54:00:00:02:00"
    graphics: false

  - id: homeautomation
    name: "vm-homeautomation"
    description: "Home automation VM"
    source_image_url: "https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
    memory: 2048  # 2GB
    vcpus: 2
    disk_size_gb: 50  # HA database, config, snapshots, recordings
    ip_address: "192.168.122.11"
    gateway: "192.168.122.1"
    dns: "192.168.122.1"
    mac_address: "52:54:00:00:02:01"
    graphics: false

  - id: downloads
    name: "vm-downloads"
    description: "Downloads and Arr stack compositions"
    source_image_url: "https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
    memory: 4096  # 4GB
    vcpus: 4
    disk_size_gb: 50  # Torrent temp, Arr databases (media on NFS)
    ip_address: "192.168.122.12"
    gateway: "192.168.122.1"
    dns: "192.168.122.1"
    mac_address: "52:54:00:00:02:02"
    graphics: false

  - id: media
    name: "vm-media"
    description: "Jellyfin, Immich, MusicAssistant, Audiobookshelf"
    source_image_url: "https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
    memory: 6144  # 6GB
    vcpus: 4
    disk_size_gb: 100  # Metadata, transcode cache, thumbnails
    ip_address: "192.168.122.13"
    gateway: "192.168.122.1"
    dns: "192.168.122.1"
    mac_address: "52:54:00:00:02:03"
    graphics: false
